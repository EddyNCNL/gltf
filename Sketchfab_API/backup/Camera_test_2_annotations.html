<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="author">
        <title>New Amsterdam 1660 DEMO</title>
        <!-- Insert this script old: <script type="text/javascript" src="https://static.sketchfab.com/api/sketchfab-viewer-1.11.0.js"></script>--> 
        <script type="text/javascript" src="https://static.sketchfab.com/api/sketchfab-viewer-1.12.1.js"></script>
    <style>
    html,
    body {
      padding: 0;
      margin: 0;
      width: 100vw;
      height: 100vh;
      -webkit-font-smoothing: antialiased;
      -moz-font-smoothing: grayscale;
      font-family: Open Sans, sans-serif;
    }
    
    * {
      box-sizing: border-box;
    }
    
    .container {
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    
    .iframe-container {
      position: relative;
      width: 100%;
      flex: 1;
      display: flex;
    }
    
    .iframe-container > iframe {
      border: 0;
      width: 100%;
      flex: 1;
    }
	
.custom-button {
background-color: white;
color: black;
padding: 30px;
border: none;
border-radius: 4px;
cursor: pointer;
font-weight: bold;
font-family: "Open Sans";
font-size: 18px;
<!--border: 2px solid black;-->
<!--border-radius: 4px;-->
}



<!-- Add 20px of empty space above the resetCamera button.
}
#resetCamera {
  margin-top: 20px;
}-->


<!-- comment out using this -->

 

    

</style>
</head>

<body>
    <div class="container">
        <div class="iframe-container">
          <iframe src="" id="api-frame"></iframe>
        </div>
		<button id="resetCamera" class="custom-button">&gt; TAP TO RESET VIEW &lt;</button>
      </div>


<script type="text/javascript">
// Sketchfab Viewer API: Camera Limits + Annotations (Full Viewer API)
const version = '1.12.1';
const uid = '066d48a04bde4afc828e3e4411fe2c12';
// Demo: a5f3238c8fbf4d4ca958de34a8870345
// Full model: a34eebc7966c4589934afb2334e182b6
// Camera restrictions: 066d48a04bde4afc828e3e4411fe2c12
const iframe = document.getElementById('api-frame');
const client = new window.Sketchfab(version, iframe);
let api;

// Camera logs
const cameraData = {
    "useCameraConstraints": true,
    "usePanConstraints": true,
    "useZoomConstraints": true,
    "usePitchConstraints": true,
    "useYawConstraints": false,
};

// Annotation logs from model
const annotationData = [
{
  "ScenePosition": [
    -104.11104670600348,
    179.11986548578793,
    5.4350120869007625
  ],
  "WorldPosition": [
    -104.11104670600348,
    179.11986548578793,
    5.4350120869007625
  ],
  "eye": {
    "0": -129.10149115121433,
    "1": 144.7995224237414,
    "2": 36.50880787145018
  },
  "target": {
    "0": -86.06278216512928,
    "1": 179.54996640862205,
    "2": 1.4347198220752537
  },
  "title": "Fort Amsterdam",
  "text": "Fort Amsterdam"
},
{
  "ScenePosition": [
    -130.48348748821545,
    252.56916819840887,
    5.77198593393268
  ],
  "WorldPosition": [
    -130.48348748821545,
    252.56916819840887,
    5.77198593393268
  ],
  "eye": {
    "0": -138.74776309176025,
    "1": 240.69537295126423,
    "2": 25.32143587614541
  },
  "target": {
    "0": -122.09944008021802,
    "1": 258.85275593224173,
    "2": 2.5970181619602593
  },
  "title": "Windmill",
  "text": "Windmill"
},
{
  "ScenePosition": [
    329.78669338941944,
    464.3540075250361,
    1.1256811429515572
  ],
  "WorldPosition": [
    329.78669338941944,
    464.3540075250361,
    1.1256811429515572
  ],
  "eye": {
    "0": 324.9221250664463,
    "1": 482.26974236443635,
    "2": 9.496776530761355
  },
  "target": {
    "0": 324.1764771673555,
    "1": 462.1694358715535,
    "2": 1.192870481349078
  },
  "title": "The Wall",
  "text": "Wall test"
},
{
  "ScenePosition": [
    160.23111292562052,
    195.42232502630367,
    -0.5519167207336859
  ],
  "WorldPosition": [
    160.23111292562052,
    195.42232502630367,
    -0.5519167207336859
  ],
  "eye": {
    "0": 141.5311515473155,
    "1": 192.38238559506271,
    "2": 13.075478117569707
  },
  "target": {
    "0": 161.3809622719085,
    "1": 194.41487220793698,
    "2": 2.6653312253846977
  },
  "title": "Stone Street",
  "text": "Stone Street"
},
{
  "ScenePosition": [
    80.93232494830677,
    585.2088379592226,
    -0.5519167207337725
  ],
  "WorldPosition": [
    80.93232494830677,
    585.2088379592226,
    -0.5519167207337725
  ],
  "eye": {
    "0": 126.02293933583404,
    "1": 585.1508743106303,
    "2": 16.24289606660325
  },
  "target": {
    "0": 66.91863643506447,
    "1": 584.6051706501036,
    "2": 0.5877916102864256
  },
  "title": "Company Garden",
  "text": "Company Garden test test."
},
{
  "ScenePosition": [
    93.7653733347417,
    62.936426811626134,
    -0.31329330490703744
  ],
  "WorldPosition": [
    93.7653733347417,
    62.936426811626134,
    -0.31329330490703744
  ],
  "eye": {
    "0": 104.92468510367739,
    "1": 31.780679562801026,
    "2": 10.684077217244017
  },
  "target": {
    "0": 63.87561526707286,
    "1": 171.79736975405996,
    "2": 0.949832847840334
  },
  "title": "Pier",
  "text": "Pier test."
}
];
// Scripts for resetting camera to default position. Position, target, speed
const resetCamera = () => {
    api.setCameraLookAt([179,85,58], [211,204,20], 5, function(err) {// api.setCameraLookAt([179,85,58], [211,204,-37], 5, function(err)
        if (!err) {
            window.console.log('Camera moved');
        }
    })
}
const error = () => window.console.error('Sketchfab API error');

const success = apiClient => {
    api = apiClient;
    api.start();
    api.addEventListener('viewerready', () => {
        window.console.log('viewer ready');
document
        .getElementById("resetCamera")
        .addEventListener("click", function () {
          resetCamera()
        });
		// Force HD textures on startup.
		api.setTextureQuality('hd', function(err) {})
        api.setCameraConstraints(cameraData, () => {
            window.console.log('Camera constraints enabled');
        });
        for (const annotation of annotationData) {
            api.createAnnotationFromScenePosition(
                annotation.ScenePosition,
                annotation.eye,
                annotation.target,
                annotation.title,
                annotation.text,
                (err, index) => {
                    if (!err) {
                        window.console.log(`Created annotation #${index + 1}`);
                    }
                }
            );
        }

    });
};


client.init(uid, {
    annotation: 0, // Usage: Setting to [1 â€“ 100] will automatically load that annotation when the viewer starts.
    annotations_visible: 1, // Usage: Setting to 0 will hide annotations by default.
    autospin: 0, // Usage: Setting to any other number will cause the model to automatically spin around the z-axis after loading.
    autostart: 1, // Usage: Setting to 1 will make the model load immediately once the page is ready, rather than waiting for a user to click the Play button.
    camera: 0, // Usage: Setting to 0 will skip the initial animation that occurs when a model is loaded, and immediately show the model in its default position.
    ui_stop: 0, // Usage: Setting to 0 will hide the "Disable Viewer" button in the top right so that users cannot stop the 3D render once it is started.
    transparent: 0, // Usage: Setting to 1 will make the model's background transparent
    ui_animations: 0, // Usage: Setting to 0 will hide the animation menu and timeline.
    ui_annotations: 1, // Usage: Setting to 0 will hide the Annotation menu.
    ui_controls: 1, // Usage: Setting to 0 will hide all the viewer controls at the bottom of the viewer (Help, Settings, Inspector, VR, Fullscreen, Annotations, and Animations).
    ui_fullscreen: 0, // Usage: Setting to 0 will hide the Fullscreen button.
    ui_general_controls: 1, // Usage: Setting to 0 will hide main control buttons in the bottom right of the viewer (Help, Settings, Inspector, VR, Fullscreen).
    ui_help: 1, // Usage: Setting to 0 will hide the Help button.
    ui_hint: 1, // Usage: Setting to 0 will always hide the viewer hint animation ("click & hold to rotate"). Setting to 1 will show the hint the first time per browser session (using a cookie). Setting to 2 will always show the hint.
    ui_infos: 0, // Usage: Setting to 0 will hide the model info bar at the top of the viewer.
    ui_inspector: 0, // Usage: Setting to 0 will hide the inspector button.
    ui_settings: 0, // Usage: Setting to 0 will hide the Settings button.
    ui_vr: 0, // Usage: Setting to 0 will hide the View in VR button.
	ui_ar: 0, // 0 will hide the AR button.
    ui_watermark_link: 0, // Usage: Setting to 0 remove the link from the Sketchfab logo watermark.
    ui_color: '00a8c0', // Usage: Setting to a hexidecimal color code (without the #) or a HTML color name will change the color of the viewer loading bar.
    ui_watermark: 0, // Usage: Setting to 0 remove the Sketchfab logo watermark .
	graph_optimizer: 1, // Magic.

    success: success,
    error: error
});



</script>
</body>
</html>